# RN Moonlight 28/12/2021

| Data da Release                         | Produto   |
| --------------------------------------- | --------- |
| 19 de nov. de 2021 a 28 de dez. de 2021 | Moonlight |

## Implementações Liberadas

- Logo Natal
  Notou alguma mudança no logo do moonlight nos últimos dias? Isso mesmo, entramos em clima de Natal, e desejamos para as nossas pessoas usuárias ótimas festas!

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-292).

- Template ECR
  Fizemos um trabalho muito bacana com o time de Kode Cloud para montarmos nosso primeiro template de infra, o template de ECR. Ele vai servir de MVP para os novos templates que pretendemos criar nas próximas releases com o intuito de trazer novos recursos de infra para dentro do moonlight e permitir que as pessoas desenvolvedoras tenham cada vez mais autonomia.

  Mais detalhes [aqui.](https://picpay.atlassian.net/browse/ATL-141)

- Sonar
  Agora o moonlight também está integrado com o sonar, o que permite ter informações de métricas da qualidade do código, como code smells, cobertura de código, etc. dentro do moonlight. Bacana né?

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-241).

- XCMetrics
  O time de iOS está utilizando uma nova ferramenta para medição de métricas de xCode, o XCMetrics. Como o intuito do moonlight é ser a plataforma dos PP devs, integramos o XCMetrics e essas métricas podem ser visualizadas dentro do moonlight.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-275).

- Seção Infraestrutura nos templates
  Incluímos uma seção de infraestrutura nos templates de criação de microsserviços, que gera uma entidade no catálogo de componentes, indicando quais recursos de infraestrutura são utilizados por aquele microsserviço.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-272).

- Validação de schema via Build Checker
  O Build Checker, nosso validador de código, que antes comparava strings passa a comparar json schemas. Com isso, torna-se possível validarmos inputs em schemas, aumentando o alcance das validações e consequentemente garantindo padronizações.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-273).

- Filtro por dia ou semana no dashboard de métricas
  Incluímos um filtro por dias ou semanas nas métricas do catálogo de componentes. Agora é possível à pessoa usuária do Moonlight escolher se quer ver os gráficos de métricas por dias ou semanas.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-272).

## Bugs

- Erro ao fazer logout no moonlight
  Ao tentar fazer logout, a pessoa usuária estava sendo redirecionada para  a mesma URL. Foi corrigido o problema e a pessoa usuária agora é redirecionada para URl correta.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-196).

- Templates não utilizados
  Alguns templates que não deveriam mais ser utilizados ainda estavam aparecendo na aplicação. Esses templates foram removidos.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-259).

- Cluster de QA no plugin do Kubernetes
  O cluster de QA não estava mais aparecendo no plugin do Kubernetes. Foi realizada uma pequena correção e o problema foi resolvido.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-246).

- Plugin Google analytics não mostrando as métricas
  O plugin do Google Analytics teve um problema e parou de enviar as métricas do moonlight. Foi feita uma correção e reconfiguração no plugin e ele voltou a funcionar.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-291).

- Erro no cálculo do CFR
  O endpoint que calcula a métrica de Change Fail Rate estava agrupando todos os CFR's na data final do filtro utilizado pela pessoa usuária. Foi realizada a correção e a métrica está correta.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-295).

- Erro no cálculo do Deploy Frequency e CFR
  Ao aplicar um filtro nas métricas de CFR e Deploy Frequency, quando o resultado era apenas 1 a aplicação estava mostrando a média como 1, quando na verdade a média deveria ser 1 dividido pela quantidade de dias utilizados no filtro. Foi realizada a correção e os cálculos estão aparecendo de forma correta.

  Mais detalhes [aqui](https://picpay.atlassian.net/browse/ATL-267).
