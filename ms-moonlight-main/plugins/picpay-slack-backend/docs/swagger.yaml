
openapi: "3.0.0"
info:
  title: "Moonlight Slack Plugin API"
  description: "API for sending notifications through Slack"
  version: "1.0.0"
paths:
  /notify:
    post:
      summary: "Send a notification via Slack"
      description: "Send a message to either a Slack channel or user via email"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                channelName:
                  type: string
                  description: "Name of the Slack channel"
                email:
                  type: string
                  format: email
                  description: "Email of the user to notify"
                message:
                  type: string
                  description: "Message content to be sent"
                buttons:
                  type: array
                  description: "Optional array of button objects"
                  items:
                    type: object
                    properties:
                      text:
                        type: string
                        description: "Button text"
                      value:
                        type: string
                        description: "Button value"
                callback:
                  type: object
                  description: "Required when buttons are present"
                  properties:
                    method:
                      type: string
                      enum:
                        - GET
                        - POST
                        - PUT
                        - DELETE
                    url:
                      type: string
                      format: uri
              required:
                - message
              oneOf:
                - required:
                    - channelName
                - required:
                    - email
      responses:
        "200":
          description: "Message sent successfully"
          content:
            text/plain:
              schema:
                type: string
                example: "Message sent to channel"
        "400":
          description: "Bad request"
          content:
            text/plain:
              schema:
                type: string
                example: "message is required"
        "500":
          description: "Internal server error"
          content:
            text/plain:
              schema:
                type: string